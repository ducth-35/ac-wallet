{"version":3,"sources":["TextWithCursor.tsx"],"names":["React","StyleSheet","Text","useBlink","TextWithCursor","textWithCursorProps","children","cursorVisible","style","cursorProps","rest","blinkVisible","isTyping","setIsTyping","useState","timeout","useRef","cursorVisibility","useMemo","cursorFontSize","flatten","styles","text","fontSize","useEffect","current","setTimeout","clearTimeout","cursor","cursorHidden","undefined","create","marginTop","color"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,cAAjC;AAGA,OAAOC,QAAP,MAAqB,kBAArB;;AAEA,MAAMC,cAAc,GAAIC,mBAAD,IAA8C;AACnE,QAAM;AACJC,IAAAA,QADI;AAEJC,IAAAA,aAFI;AAGJC,IAAAA,KAHI;AAIJC,IAAAA,WAJI;AAKJ,OAAGC;AALC,MAMFL,mBANJ;AAQA,QAAMM,YAAY,GAAGR,QAAQ,EAA7B;AAEA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0Bb,KAAK,CAACc,QAAN,CAAe,KAAf,CAAhC;AAEA,QAAMC,OAAO,GAAGf,KAAK,CAACgB,MAAN,EAAhB;AAEA,QAAMC,gBAAgB,GAAGjB,KAAK,CAACkB,OAAN,CAAc,MAAM;AAC3C,WAAOX,aAAa,KAAKI,YAAY,IAAIC,QAArB,CAApB;AACD,GAFwB,EAEtB,CAACD,YAAD,EAAeJ,aAAf,EAA8BK,QAA9B,CAFsB,CAAzB;AAIA,QAAMO,cAAc,GAAGnB,KAAK,CAACkB,OAAN,CAAc,MAAM;AACzC,WAAOjB,UAAU,CAACmB,OAAX,CAAmB,CAACC,MAAM,CAACC,IAAR,EAAcd,KAAd,CAAnB,EAAyCe,QAAzC,IAAqD,EAA5D;AACD,GAFsB,EAEpB,CAACf,KAAD,CAFoB,CAAvB;AAIAR,EAAAA,KAAK,CAACwB,SAAN,CAAgB,MAAM;AACpBX,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAE,IAAAA,OAAO,CAACU,OAAR,GAAkBC,UAAU,CAAC,MAAM;AACjCb,MAAAA,WAAW,CAAC,KAAD,CAAX;AACD,KAF2B,EAEzB,GAFyB,CAA5B;AAIA,WAAO,MAAM;AACXE,MAAAA,OAAO,CAACU,OAAR,IAAmBE,YAAY,CAACZ,OAAO,CAACU,OAAT,CAA/B;AACD,KAFD;AAGD,GATD,EASG,CAACnB,QAAD,CATH;AAWA,sBACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE,CAACe,MAAM,CAACC,IAAR,EAAcd,KAAd;AAAb,KAAuCE,IAAvC,GACGJ,QADH,eAEE,oBAAC,IAAD,eACMG,WADN;AAEE,IAAA,KAAK,EAAE,CACL;AACEc,MAAAA,QAAQ,EAAEJ,cAAc,IAAIA,cAAc,GAAG,EAAjB,GAAsB,IAAtB,GAA6B,IAAjC;AAD1B,KADK,EAILE,MAAM,CAACO,MAJF,EAKLnB,WALK,aAKLA,WALK,uBAKLA,WAAW,CAAED,KALR,EAML,CAACS,gBAAD,GAAoBI,MAAM,CAACQ,YAA3B,GAA0CC,SANrC;AAFT,UAFF,CADF;AAkBD,CApDD;;AAsDA,MAAMT,MAAM,GAAGpB,UAAU,CAAC8B,MAAX,CAAkB;AAC/BT,EAAAA,IAAI,EAAE;AACJC,IAAAA,QAAQ,EAAE,EADN;AAEJS,IAAAA,SAAS,EAAE,CAAC;AAFR,GADyB;AAK/BJ,EAAAA,MAAM,EAAE;AACNK,IAAAA,KAAK,EAAE;AADD,GALuB;AAQ/BJ,EAAAA,YAAY,EAAE;AACZI,IAAAA,KAAK,EAAE;AADK;AARiB,CAAlB,CAAf;AAaA,eAAe7B,cAAf","sourcesContent":["import * as React from 'react';\nimport { StyleSheet, Text } from 'react-native';\n\nimport type { TextWithCursorProps } from './props';\nimport useBlink from './hooks/useBlink';\n\nconst TextWithCursor = (textWithCursorProps: TextWithCursorProps) => {\n  const {\n    children,\n    cursorVisible,\n    style,\n    cursorProps,\n    ...rest\n  } = textWithCursorProps;\n\n  const blinkVisible = useBlink();\n\n  const [isTyping, setIsTyping] = React.useState(false);\n\n  const timeout = React.useRef<NodeJS.Timeout>();\n\n  const cursorVisibility = React.useMemo(() => {\n    return cursorVisible && (blinkVisible || isTyping);\n  }, [blinkVisible, cursorVisible, isTyping]);\n\n  const cursorFontSize = React.useMemo(() => {\n    return StyleSheet.flatten([styles.text, style]).fontSize || 18;\n  }, [style]);\n\n  React.useEffect(() => {\n    setIsTyping(true);\n    timeout.current = setTimeout(() => {\n      setIsTyping(false);\n    }, 500);\n\n    return () => {\n      timeout.current && clearTimeout(timeout.current);\n    };\n  }, [children]);\n\n  return (\n    <Text style={[styles.text, style]} {...rest}>\n      {children}\n      <Text\n        {...cursorProps}\n        style={[\n          {\n            fontSize: cursorFontSize * (cursorFontSize < 26 ? 1.42 : 1.25),\n          },\n          styles.cursor,\n          cursorProps?.style,\n          !cursorVisibility ? styles.cursorHidden : undefined,\n        ]}\n      >\n        |\n      </Text>\n    </Text>\n  );\n};\n\nconst styles = StyleSheet.create({\n  text: {\n    fontSize: 18,\n    marginTop: -3.2,\n  },\n  cursor: {\n    color: '#6495ed',\n  },\n  cursorHidden: {\n    color: 'transparent',\n  },\n});\n\nexport default TextWithCursor;\n"]}