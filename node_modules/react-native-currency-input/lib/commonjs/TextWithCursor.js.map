{"version":3,"sources":["TextWithCursor.tsx"],"names":["TextWithCursor","textWithCursorProps","children","cursorVisible","style","cursorProps","rest","blinkVisible","isTyping","setIsTyping","React","useState","timeout","useRef","cursorVisibility","useMemo","cursorFontSize","StyleSheet","flatten","styles","text","fontSize","useEffect","current","setTimeout","clearTimeout","cursor","cursorHidden","undefined","create","marginTop","color"],"mappings":";;;;;;;AAAA;;AACA;;AAGA;;;;;;;;;;AAEA,MAAMA,cAAc,GAAIC,mBAAD,IAA8C;AACnE,QAAM;AACJC,IAAAA,QADI;AAEJC,IAAAA,aAFI;AAGJC,IAAAA,KAHI;AAIJC,IAAAA,WAJI;AAKJ,OAAGC;AALC,MAMFL,mBANJ;AAQA,QAAMM,YAAY,GAAG,wBAArB;AAEA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BC,KAAK,CAACC,QAAN,CAAe,KAAf,CAAhC;AAEA,QAAMC,OAAO,GAAGF,KAAK,CAACG,MAAN,EAAhB;AAEA,QAAMC,gBAAgB,GAAGJ,KAAK,CAACK,OAAN,CAAc,MAAM;AAC3C,WAAOZ,aAAa,KAAKI,YAAY,IAAIC,QAArB,CAApB;AACD,GAFwB,EAEtB,CAACD,YAAD,EAAeJ,aAAf,EAA8BK,QAA9B,CAFsB,CAAzB;AAIA,QAAMQ,cAAc,GAAGN,KAAK,CAACK,OAAN,CAAc,MAAM;AACzC,WAAOE,wBAAWC,OAAX,CAAmB,CAACC,MAAM,CAACC,IAAR,EAAchB,KAAd,CAAnB,EAAyCiB,QAAzC,IAAqD,EAA5D;AACD,GAFsB,EAEpB,CAACjB,KAAD,CAFoB,CAAvB;AAIAM,EAAAA,KAAK,CAACY,SAAN,CAAgB,MAAM;AACpBb,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAG,IAAAA,OAAO,CAACW,OAAR,GAAkBC,UAAU,CAAC,MAAM;AACjCf,MAAAA,WAAW,CAAC,KAAD,CAAX;AACD,KAF2B,EAEzB,GAFyB,CAA5B;AAIA,WAAO,MAAM;AACXG,MAAAA,OAAO,CAACW,OAAR,IAAmBE,YAAY,CAACb,OAAO,CAACW,OAAT,CAA/B;AACD,KAFD;AAGD,GATD,EASG,CAACrB,QAAD,CATH;AAWA,sBACE,oBAAC,iBAAD;AAAM,IAAA,KAAK,EAAE,CAACiB,MAAM,CAACC,IAAR,EAAchB,KAAd;AAAb,KAAuCE,IAAvC,GACGJ,QADH,eAEE,oBAAC,iBAAD,eACMG,WADN;AAEE,IAAA,KAAK,EAAE,CACL;AACEgB,MAAAA,QAAQ,EAAEL,cAAc,IAAIA,cAAc,GAAG,EAAjB,GAAsB,IAAtB,GAA6B,IAAjC;AAD1B,KADK,EAILG,MAAM,CAACO,MAJF,EAKLrB,WALK,aAKLA,WALK,uBAKLA,WAAW,CAAED,KALR,EAML,CAACU,gBAAD,GAAoBK,MAAM,CAACQ,YAA3B,GAA0CC,SANrC;AAFT,UAFF,CADF;AAkBD,CApDD;;AAsDA,MAAMT,MAAM,GAAGF,wBAAWY,MAAX,CAAkB;AAC/BT,EAAAA,IAAI,EAAE;AACJC,IAAAA,QAAQ,EAAE,EADN;AAEJS,IAAAA,SAAS,EAAE,CAAC;AAFR,GADyB;AAK/BJ,EAAAA,MAAM,EAAE;AACNK,IAAAA,KAAK,EAAE;AADD,GALuB;AAQ/BJ,EAAAA,YAAY,EAAE;AACZI,IAAAA,KAAK,EAAE;AADK;AARiB,CAAlB,CAAf;;eAae/B,c","sourcesContent":["import * as React from 'react';\nimport { StyleSheet, Text } from 'react-native';\n\nimport type { TextWithCursorProps } from './props';\nimport useBlink from './hooks/useBlink';\n\nconst TextWithCursor = (textWithCursorProps: TextWithCursorProps) => {\n  const {\n    children,\n    cursorVisible,\n    style,\n    cursorProps,\n    ...rest\n  } = textWithCursorProps;\n\n  const blinkVisible = useBlink();\n\n  const [isTyping, setIsTyping] = React.useState(false);\n\n  const timeout = React.useRef<NodeJS.Timeout>();\n\n  const cursorVisibility = React.useMemo(() => {\n    return cursorVisible && (blinkVisible || isTyping);\n  }, [blinkVisible, cursorVisible, isTyping]);\n\n  const cursorFontSize = React.useMemo(() => {\n    return StyleSheet.flatten([styles.text, style]).fontSize || 18;\n  }, [style]);\n\n  React.useEffect(() => {\n    setIsTyping(true);\n    timeout.current = setTimeout(() => {\n      setIsTyping(false);\n    }, 500);\n\n    return () => {\n      timeout.current && clearTimeout(timeout.current);\n    };\n  }, [children]);\n\n  return (\n    <Text style={[styles.text, style]} {...rest}>\n      {children}\n      <Text\n        {...cursorProps}\n        style={[\n          {\n            fontSize: cursorFontSize * (cursorFontSize < 26 ? 1.42 : 1.25),\n          },\n          styles.cursor,\n          cursorProps?.style,\n          !cursorVisibility ? styles.cursorHidden : undefined,\n        ]}\n      >\n        |\n      </Text>\n    </Text>\n  );\n};\n\nconst styles = StyleSheet.create({\n  text: {\n    fontSize: 18,\n    marginTop: -3.2,\n  },\n  cursor: {\n    color: '#6495ed',\n  },\n  cursorHidden: {\n    color: 'transparent',\n  },\n});\n\nexport default TextWithCursor;\n"]}